public class Solution {
    
    private Dictionary<string,int> dict=new Dictionary<string,int>();
    private int mod=(int)Math.Pow(10,9)+7;
    public int NumRollsToTarget(int n, int k, int target) {
        return dfs(n,k,target);
    }
    
    private int dfs(int n,int k,int target)
    {
        string tmp=tostring(n,target);
        if(dict.ContainsKey(tmp))
            return dict[tmp];
        if(n==0)
            return target==0?1:0;
        if(target<=0)
            return 0;
        int total=0;
        for(int i=1;i<=k;i++)
        {
            total+=dfs(n-1,k,target-i);
            total%=mod;
        }
        dict[tmp]=total;
        return total;
    }
    
    private string tostring(int a,int b)
    {
        return a.ToString()+" "+b.ToString();
    }
}
